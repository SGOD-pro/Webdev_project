<% include ./partials/header.ejs %>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <style>
        .swiper {
            width: 100%;
            height: 100%;
        }

        .swiper-slide {
            text-align: center;
            font-size: 18px;
            background: #fff;
            display: flex!important;
            justify-content: space-around!important;;
            align-items: center!important;
            
        }

        .swiper-slide img {
            display: block;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .autoplay-progress {
            position: absolute;
            right: 16px;
            bottom: 16px;
            z-index: 10;
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            color: var(--swiper-theme-color);
        }

        .autoplay-progress svg {
            --progress: 0;
            position: absolute;
            left: 0;
            top: 0px;
            z-index: 10;
            width: 100%;
            height: 100%;
            stroke-width: 4px;
            stroke: var(--swiper-theme-color);
            fill: none;
            stroke-dashoffset: calc(125.6px * (1 - var(--progress)));
            stroke-dasharray: 125.6;
            transform: rotate(-90deg);
        }

        .swiper-slide .image {
            width: 320px;
            height: 320px;
            background-color: rgba(250, 234, 214, 0.5);
        }

        .swiper-slide:nth-child(1) .image {
            background-color: rgba(250, 234, 214, 0.5);
        }

        .swiper-slide:nth-child(2) .image {
            background-color: rgba(144, 238, 144, 0.5);
        }

        .swiper-slide:nth-child(3) .image {
            background-color: rgba(173, 216, 230, 0.5);
        }

        .swiper-slide:nth-child(4) .image {
            background-color: rgba(255, 192, 203, 0.5);
        }

        .swiper-slide:nth-child(5) .image {
            background-color: rgba(255, 255, 0, 0.5);
        }

        .swiper-slide:nth-child(6) .image {
            background-color: rgba(255, 99, 71, 0.5);
        }

        .swiper-slide:nth-child(7) .image {
            background-color: rgba(128, 0, 128, 0.5);

        }

        .swiper-slide .image img {
            width: 98%;
            height: 98%;
            object-fit: cover;
            object-position: top;
            box-shadow: 0 0 1.2rem hsla(0, 0%, 0%, 0.9);
            transform: translate(7%, 7%);
        }

        .swiper-slide .text {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Oxygen,
                Ubuntu, Cantarell, "Open Sans", "Helvetica Neue", sans-serif;
            color: var(--primary-text-color);
        }

        figcaption {
            grid-column: 3/5;
            grid-row: 3/4;
            display: grid;
            grid-template-columns: 1fr 1fr;
        }

        blockquote {
            grid-column: 1/3;
            padding-bottom: 1rem;
            font-size: clamp(1.5rem, 4vw, 4rem);
            font-weight: 100;
            align-self: flex-end;
            transform: translateX(5%);
            text-align: left;
        }

        cite {
            grid-column: 2/3;
            font-size: 1.3rem;
            font-size: clamp(1rem, 2.5vw, 1.4rem);

            font-weight: 100;
            font-style: normal;
            transform: translateX(-35%);
            text-align: left;
        }
    </style>
    <link rel="stylesheet" href="/stylesheets/doctorpage.css">

    <body>
        <% include ./partials/navbar.ejs %>
            <% include ./partials/forms.ejs %>
                <% include ./partials/toast.ejs %>

                    <main class="scrollbar">

                        <div class="heading">
                            <div class="swiper mySwiper">
                                <div class="swiper-wrapper">
                                    <% slider.forEach(element => { %>
                                        <div class="swiper-slide mx-4">
                                            <div class="image d-flex justify-content-end align-items-end">
                                                <img src="<%= element.image %>" alt="">
                                            </div>
                                            <div class="text d-flex justify-content-center align-items-center">
                                                <figcaption>
                                                    <blockquote class="m-0">
                                                        <%= element.name %>
                                                    </blockquote>
                                                    <cite class="m-0">
                                                        Specialisation: <%= element.speciality %> <br>
                                                        Experience: <%= element.experience %> years <br>
                                                        Location: <%= element.clinicLocation %>
                                                    </cite>
                                                </figcaption>
                                            </div>
                                        </div>
                                    <% }); %>
                                </div>
                                <div class="swiper-button-next"></div>
                                <div class="swiper-button-prev"></div>
                                <div class="swiper-pagination"></div>
                                <div class="autoplay-progress">
                                    <svg viewBox="0 0 48 48">
                                        <circle cx="24" cy="24" r="20"></circle>
                                    </svg>
                                    <span></span>
                                </div>
                            </div>
                            
                        </div>

                        <div class="conatiners">
                            <% doctors.forEach(element=> {%>
                                <div class="container w-full my-3">
                                    <h1 class="text-lg mb-2 ms-4">
                                        <%=element._id %>
                                    </h1>
                                    <div class="cards scrollbar">
                                        <% element.doctors.forEach(item=> {%>
                                            <div class="card inline-block" style="width: 18rem;">
                                                <div class="image">
                                                    <img src="<%=item.image %>" class="card-img-top" alt="...">
                                                </div>
                                                <div class="card-body">
                                                    <h5 class="card-title">
                                                        <%=item.name %>
                                                    </h5>
                                                    <div class="card-text text-sm">
                                                        <p class="">Location:<%=item.clinicLocation %>
                                                        </p>
                                                        <p class="">Speciality:<%=item.speciality %>
                                                        </p>
                                                        <p class="">Contact No:<%=item.contactNo %>
                                                        </p>
                                                        <p class="">Timing :<%=item.timing %>
                                                        </p>
                                                        <p class="">Days :<%=item.days %>
                                                        </p>
                                                    </div>
                                                    <button data-id="<%=item._id %>" class="btn btn-info"
                                                        onclick="book(event)">Book</button>
                                                </div>
                                            </div>
                                            <% }); %>
                                    </div>
                                </div>
                                <% }); %>
                        </div>

                    </main>

                    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>



                    <script>
                        const containers = document.querySelectorAll('.cards');
                        let isDragging = false;
                        let startX, scrollLeft;

                        containers.forEach(container => {
                            container.addEventListener('mousedown', (e) => {
                                isDragging = true;
                                startX = e.pageX - container.offsetLeft;
                                scrollLeft = container.scrollLeft;
                            });

                            container.addEventListener('mouseleave', () => {
                                isDragging = false;
                            });

                            container.addEventListener('mouseup', () => {
                                isDragging = false;
                            });

                            container.addEventListener('mousemove', (e) => {
                                if (!isDragging) return;
                                e.preventDefault();
                                const x = e.pageX - container.offsetLeft;
                                const walk = (x - startX) * .5;
                                container.scrollLeft = scrollLeft - walk;
                            });
                        });


                        function book(event) {
                            const id = event.target.getAttribute('data-id')
                            localStorage.setItem("id", id)
                            document.getElementById("user-login-btn").click()
                        }

                    </script>
                    <script defer>
                        document.addEventListener('DOMContentLoaded', function () {
                            const progressCircle = document.querySelector(".autoplay-progress svg");
                            const progressContent = document.querySelector(".autoplay-progress span");
                            var swiper = new Swiper(".mySwiper", {
                                spaceBetween: 30,
                                centeredSlides: true,
                                autoplay: {
                                    delay: 5000,
                                    disableOnInteraction: false
                                },
                                pagination: {
                                    el: ".swiper-pagination",
                                    clickable: true
                                },
                                navigation: {
                                    nextEl: ".swiper-button-next",
                                    prevEl: ".swiper-button-prev"
                                },
                                on: {
                                    autoplayTimeLeft(s, time, progress) {
                                        progressCircle.style.setProperty("--progress", 1 - progress);
                                        progressContent.textContent = `${Math.ceil(time / 1000)}s`;
                                    }
                                }
                            });
                        });
                    </script>
                    <% include ./partials/footer.ejs %>